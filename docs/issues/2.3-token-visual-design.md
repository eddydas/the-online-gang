# Issue 2.3: Token Visual Design (Poker Chips)

**Sprint:** 2 v2
**Priority:** CRITICAL
**Estimate:** 10 hours
**Status:** TODO

## Description
Design and implement poker chip-style tokens with star patterns, turn-based colors, and striped outer rings. Tokens are the core interaction element of the game.

## User Story
As a player, I want tokens to look like poker chips with clear visual indicators so that I can easily distinguish token numbers and track which turn I'm on.

## Acceptance Criteria
- [ ] Circular poker chip design (3D-like appearance)
- [ ] Star patterns indicate token number (1-8 stars)
- [ ] Star layouts visually distinguishable at a glance
- [ ] Turn-based outer ring colors:
  - **Turn 1:** White (1 stripe)
  - **Turn 2:** Yellow (2 stripes)
  - **Turn 3:** Orange (3 stripes)
  - **Turn 4:** Red (4 stripes)
- [ ] Token pool display in center of table
- [ ] Token history display per player (4 tokens visible, left to right)
- [ ] "Taken by [Player]" placeholder when token stolen
- [ ] Hover effects (scale, glow)
- [ ] Active/selected state styling
- [ ] Responsive sizing (desktop vs mobile)

## Star Pattern Layouts

Visual distinction is critical - players must quickly identify token numbers:

```
Token 1: ★ (single center star)

Token 2: ★   ★ (two stars, left-right)

Token 3:   ★    (triangle pattern)
        ★   ★

Token 4: ★   ★  (square corners)
        ★   ★

Token 5:   ★     (+ center star)
        ★ ★ ★

Token 6: ★ ★ ★  (two rows of 3)
        ★ ★ ★

Token 7:   ★     (hexagon pattern)
        ★ ★ ★
          ★

Token 8: ★ ★ ★  (3x3 grid, no center)
        ★   ★
        ★ ★ ★
```

## Token HTML Structure

```html
<div class="token" data-number="3" data-turn="2" data-owner="player-id">
  <div class="token-inner">
    <!-- Outer ring with stripes (turn-based color) -->
    <div class="token-ring turn-2"></div>

    <!-- Inner chip body -->
    <div class="token-body">
      <!-- Stars for token number -->
      <div class="token-stars">
        <span class="star" style="--position: top"></span>
        <span class="star" style="--position: bottom-left"></span>
        <span class="star" style="--position: bottom-right"></span>
      </div>
    </div>
  </div>
</div>
```

## CSS Styling

### Base Token
```css
.token {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  position: relative;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* 3D poker chip effect */
.token-inner {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  position: relative;
  box-shadow:
    0 4px 8px rgba(0,0,0,0.3),
    inset 0 -2px 4px rgba(0,0,0,0.2),
    inset 0 2px 4px rgba(255,255,255,0.2);
}

.token-body {
  width: 70px;
  height: 70px;
  background: #2c3e50; /* Dark chip color */
  border-radius: 50%;
  position: absolute;
  top: 5px;
  left: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Responsive sizing */
@media (max-width: 768px) {
  .token {
    width: 60px;
    height: 60px;
  }

  .token-body {
    width: 52px;
    height: 52px;
  }
}

.token.mini {
  width: 40px;
  height: 40px;
}

.token.mini .token-body {
  width: 34px;
  height: 34px;
}
```

### Turn-Based Outer Rings

```css
.token-ring {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 5px solid;
}

/* Turn 1: White, 1 stripe */
.token-ring.turn-1 {
  border-color: white;
  background: conic-gradient(
    white 0deg 180deg,
    transparent 180deg 360deg
  );
}

/* Turn 2: Yellow, 2 stripes */
.token-ring.turn-2 {
  border-color: #f39c12;
  background: repeating-conic-gradient(
    #f39c12 0deg 90deg,
    transparent 90deg 180deg
  );
}

/* Turn 3: Orange, 3 stripes */
.token-ring.turn-3 {
  border-color: #e67e22;
  background: repeating-conic-gradient(
    #e67e22 0deg 60deg,
    transparent 60deg 120deg
  );
}

/* Turn 4: Red, 4 stripes */
.token-ring.turn-4 {
  border-color: #e74c3c;
  background: repeating-conic-gradient(
    #e74c3c 0deg 45deg,
    transparent 45deg 90deg
  );
}
```

### Star Patterns

```css
.token-stars {
  position: relative;
  width: 50px;
  height: 50px;
}

.star {
  position: absolute;
  color: #f39c12; /* Gold stars */
  font-size: 14px;
}

.star::before {
  content: '★';
}

/* Star positioning variables */
.star[style*="--position: center"] {
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.star[style*="--position: top"] {
  top: 10%;
  left: 50%;
  transform: translateX(-50%);
}

.star[style*="--position: bottom"] {
  bottom: 10%;
  left: 50%;
  transform: translateX(-50%);
}

/* ... more position variants */
```

### States

```css
/* Hover */
.token:hover {
  transform: scale(1.1);
  box-shadow: 0 0 16px rgba(243, 156, 18, 0.6);
}

/* Selected/Active */
.token.selected {
  transform: scale(1.15);
  box-shadow: 0 0 20px rgba(243, 156, 18, 0.8);
}

/* Disabled (already owned) */
.token.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.token.disabled:hover {
  transform: none;
  box-shadow: none;
}
```

## Token Pool Layout

```css
#token-pool {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 16px;
  padding: 20px;
  flex-wrap: wrap;
}

/* Mobile: smaller gap */
@media (max-width: 768px) {
  #token-pool {
    gap: 12px;
    padding: 12px;
  }
}
```

## Token History Display

```html
<div class="player-token-history">
  <div class="token mini" data-number="1" data-turn="1"></div>
  <div class="token mini" data-number="3" data-turn="2"></div>
  <div class="token mini" data-number="2" data-turn="3"></div>
  <div class="token-placeholder">Taken by Alice</div>
</div>
```

```css
.player-token-history {
  display: flex;
  gap: 8px;
  align-items: center;
}

.token-placeholder {
  width: 40px;
  height: 40px;
  border: 2px dashed #95a5a6;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  color: #7f8c8d;
  text-align: center;
  position: relative;
}

.token-placeholder::after {
  content: attr(data-taken-by);
  position: absolute;
  bottom: -20px;
  white-space: nowrap;
  font-size: 10px;
}
```

## JavaScript Token Generation

```javascript
/**
 * Create token element
 * @param {number} number - Token number (1-8)
 * @param {number} turn - Current turn (1-4)
 * @param {boolean} interactive - Whether token is clickable
 * @returns {HTMLElement}
 */
function createTokenElement(number, turn, interactive = true) {
  const token = document.createElement('div');
  token.className = `token ${interactive ? '' : 'disabled'}`;
  token.dataset.number = number;
  token.dataset.turn = turn;

  const inner = document.createElement('div');
  inner.className = 'token-inner';

  const ring = document.createElement('div');
  ring.className = `token-ring turn-${turn}`;

  const body = document.createElement('div');
  body.className = 'token-body';

  const starsContainer = document.createElement('div');
  starsContainer.className = 'token-stars';

  // Generate star pattern based on number
  const starPositions = getStarPositions(number);
  starPositions.forEach(position => {
    const star = document.createElement('span');
    star.className = 'star';
    star.style.setProperty('--position', position);
    starsContainer.appendChild(star);
  });

  body.appendChild(starsContainer);
  inner.appendChild(ring);
  inner.appendChild(body);
  token.appendChild(inner);

  return token;
}

/**
 * Get star positions for token number
 * @param {number} number - Token number (1-8)
 * @returns {string[]} Array of position strings
 */
function getStarPositions(number) {
  const patterns = {
    1: ['center'],
    2: ['left', 'right'],
    3: ['top', 'bottom-left', 'bottom-right'],
    4: ['top-left', 'top-right', 'bottom-left', 'bottom-right'],
    5: ['center', 'top-left', 'top-right', 'bottom-left', 'bottom-right'],
    6: ['top-left', 'top-center', 'top-right',
        'bottom-left', 'bottom-center', 'bottom-right'],
    7: ['top-center', 'left', 'center', 'right',
        'bottom-left', 'bottom-center', 'bottom-right'],
    8: ['top-left', 'top-center', 'top-right',
        'left', 'right',
        'bottom-left', 'bottom-center', 'bottom-right']
  };

  return patterns[number] || [];
}
```

## Files to Create/Modify
- `src/browser/tokenRenderer.js` - Update token rendering with new design
- `src/browser/tokens.js` - Add star pattern generation
- CSS file or inline styles for token design
- `src/browser/main.js` - Update token click handlers with new classes

## Testing Checklist
- [ ] All 8 token designs render correctly
- [ ] Star patterns are visually distinct (can identify at a glance)
- [ ] Turn-based colors display correctly (white→yellow→orange→red)
- [ ] Stripe patterns render correctly (1, 2, 3, 4 stripes)
- [ ] Token pool displays in center of table
- [ ] Token history shows 4 slots per player
- [ ] "Taken by" placeholder displays when token stolen
- [ ] Hover effect works (scale + glow)
- [ ] Selected state works (larger scale + brighter glow)
- [ ] Disabled state works (opacity, no hover)
- [ ] Responsive sizing (desktop 80px, mobile 60px, mini 40px)
- [ ] Click detection works accurately
- [ ] No visual glitches on Safari iOS

## Dependencies
- Issue 2.2 (Visual Design Foundation) - Table layout
- Issue 1.4 (Token System) - Token logic

## Notes
- Star patterns should be instantly recognizable
- Turn colors provide clear progression indicator (white → red)
- 3D poker chip effect adds professional polish
- Reuse token component for pool, history, and end-game table

## Definition of Done
- [ ] All token designs implemented and rendering
- [ ] Star patterns visually distinct
- [ ] Turn-based colors and stripes correct
- [ ] Token pool and history display properly
- [ ] Hover and selected states work
- [ ] Responsive design works on all devices
- [ ] Tested on Safari iOS, macOS, iPad
- [ ] Code passes typecheck
- [ ] Approved by product owner
